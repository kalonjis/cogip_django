{% extends 'base.html' %}

    {% block title %}
        <title>{{company.name}}</title>
    {% endblock %}

    {% block content %}
        <h1>Société : {{company.name}}</h1>

        {% if request.user.is_authenticated %}
            <ul>
                <li><a href="{% url 'office:company-edit' slug=company.slug %}">| edit</a></li>
                <li><a href="{% url 'office:company-delete' slug=company.slug %}">| supprimer</a></li>
            </ul>
        {% endif %}

        <table>
            <tr>
                <td>N° TVA :</td><td> {{ company.vat_number }} </td>
            </tr>
            <tr>
                <td>Pays :</td><td> {{ company.country_value }} </td>
            </tr>
            <tr>
                <td>Type :</td><td> {{ company.type_value }} </td>
            </tr>
        </table>

        <h2>Personnes de contact </h2>
        <table>
            <tr>
                <th>Nom </th>
                <th>Phone </th>
                <th>Email </th>
            </tr>
            {% for contact in contacts %}
                <tr>
                    <td> {{ contact.fullname}} </td>
                    <td> {{ contact.phone}} </td>
                    <td> {{ contact.email}} </td>
                    <td><a href="{% url 'office:contact-detail' slug=contact.slug %}">| voir</a></td>
                </tr>
            {% endfor %}
        </table>

        <h2>Factures :</h2>
        <table>
            <tr>
                <th>N° facture </th>
                <th>Date </th>
                <th>Personne de contact </th>
            </tr>
            {% for invoice in invoices %}
                <tr>
                    <td> {{ invoice.number}} </td>
                    <td> {{ invoice.date}} </td>
                    {% for contact in contacts %}
                        {% if invoice.contact_id == contact.id %}
                            <td> {{ contact.fullname }} </td>
                        {% endif %}
                    {% endfor %}
                    <td><a href="{% url 'office:invoice-detail' pk=invoice.id %}">| voir</a></td>
                </tr>
            {% endfor %}
        </table>
    {% endblock %}